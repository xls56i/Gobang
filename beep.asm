PUBLIC BEEP
.MODEL SMALL
.STACK 64
.DATA
NOTES DW 11CAH,11CAH,0FDAH,11CAH,0D5BH,0E1FH,11CAH
Duration DB 2,2,4,4,4,8,2
.CODE
BEEP PROC FAR
	MOV AX,@DATA
	MOV DS,AX
	MOV AL,0B6H
	OUT 43H,AL
	MOV BX,7
	LEA SI,NOTES
	LEA DI,Duration
AGAIN:
	MOV AX,[SI]
	OUT 42H,AL
	MOV DL,[DI]
	CALL SpkON
	INC SI
	INC SI
	INC DI
	DEC BX
	JNZ AGAIN
	
EXIT:
	RET
BEEP ENDP
SpkON PROC
	IN AL,61H
	MOV AH,AL
	OR AL,00000011B
	OUT 61H,AL
BACK:
	CALL DELAY
	DEC DL
	CMP DL,00
	JNE BACK
	MOV AL,AH
	OUT 61H,AL
	CALL DELAY_OFF
	RET
SpkON ENDP

DELAY_OFF PROC NEAR
	MOV CX,331
	PUSH AX
WAIT0:
	IN AL,61H
	AND AL,10H
	CMP AL,AH
	JE WAIT0
	MOV AH,AL
	LOOP WAIT0
	POP AX
	RET
DELAY_OFF ENDP

DELAY PROC NEAR
	MOV CX,33156
	PUSH AX
WAIT1:
	IN AL,61H
	AND AL,10H
	CMP AL,AH
	JE WAIT1
	MOV AH,AL
	LOOP WAIT1
	POP AX
	RET
DELAY ENDP
	END





